<!-- 此文件由机器翻译自 resources.md -->

# CPU、内存和磁盘资源

## 默认资源

每个 Modal 容器都有默认保留：
- **CPU**：0.125 个核心
- **内存**：128 MiB

如果工作人员有可用资源，容器可以超过最小值。

## CPU 核心

请求 CPU 核心作为浮点数：

```python
@app.function(cpu=8.0)
def my_function():
    # Guaranteed access to at least 8 physical cores
    ...
```

值对应于物理核心，而不是 vCPU。

Modal根据CPU预留设置多线程环境变量：
- `OPENBLAS_NUM_THREADS`
- `OMP_NUM_THREADS`
- `MKL_NUM_THREADS`

## 内存

请求内存（以兆字节为单位）（整数）：

<<<代码块_1>>>

## 资源限制

### CPU 限制

默认 CPU 软限制：请求 + 16 核
- 默认请求：0.125 个核心 → 默认限制：16.125 个核心
- 超出限制，主机限制 CPU 使用率

设置显式 CPU 限制：

<<<代码块_2>>>

### 内存限制

将硬内存限制设置为 OOM 杀死容器的阈值：

<<<代码块_3>>>

对于及早发现内存泄漏很有用。

### 磁盘限制

正在运行的容器可以访问许多 GB 的 SSD 磁盘，但受到以下限制：
1.底层worker的SSD容量
2. 每个容器的磁盘配额（100 GB）

达到限制会导致磁盘写入`OSError`。

使用 `ephemeral_disk` 请求更大的磁盘：

<<<代码块_4>>>

最大磁盘大小：3.0 TiB (3,145,728 MiB)
预期用途：数据集处理

## 计费

根据预订或实际使用中较高者收费。

磁盘请求以 20:1 的比例增加内存请求：
- 请求 500 GiB 磁盘 → 将内存请求增加到 25 GiB（如果还没有更高）

## 最大请求数

模态在函数创建时强制执行最大值。超过最大值的请求将被拒绝，并显示 `InvalidError`。

如果您需要更高的限制，请联系支持人员。

## 示例：资源配置

<<<代码块_5>>>

## 监控资源使用情况

在模态仪表板中查看资源使用情况：
- CPU利用率
- 内存使用情况
- 磁盘使用情况
- GPU 指标（如果适用）

通过 https://modal.com/apps 访问