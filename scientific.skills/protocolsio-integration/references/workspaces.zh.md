<!-- 此文件由机器翻译自 workspaces.md -->

# 工作区 API

## 概述

Protocols.io 中的工作区通过组织协议、管理成员和控制访问权限来实现团队协作。工作区 API 允许您列出工作区、管理成员资格以及访问工作区特定的协议。

## 基本网址

所有工作区端点都使用基本 URL：`https://protocols.io/api/v3`

## 工作区操作

### 列出用户工作空间

检索经过身份验证的用户有权访问的所有工作区。

**端点：** `GET /workspaces`

**查询参数：**
- `page_size`：每页结果数（默认：10，最大：50）
- `page_id`：分页的页码（从0开始）

**回复包括：**
- 工作区 ID 和名称
- 工作空间类型（个人、团体、机构）
- 会员数量
- 访问级别（所有者、管理员、成员、查看者）
- 创建日期

**请求示例：**
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "https://protocols.io/api/v3/workspaces"
```

### 获取工作区详细信息

检索有关特定工作区的详细信息。

**端点：** `GET /workspaces/{workspace_id}`

**路径参数：**
- `workspace_id`：工作区的唯一标识符

**回复包括：**
- 完整的工作区元数据
- 包含角色的成员列表
- 工作区设置和权限
- 协议数量和类别

## 工作区会员资格

### 列出工作区成员

检索工作区的所有成员。

**端点：** `GET /workspaces/{workspace_id}/members`

**查询参数：**
- `page_size`：每页结果数
- `page_id`：分页的页码

**回复包括：**
- 会员姓名和电子邮件
- 角色（所有者、管理员、成员、查看者）
- 加入日期
- 活动状态

### 请求工作区访问权限

请求加入工作区。

**端点：** `POST /workspaces/{workspace_id}/join-request`

**请求正文：**
- `message`（可选）：向工作区管理员发送消息，解释请求

**请求示例：**
<<<代码块_1>>>

### 加入公共工作空间

未经批准直接加入公共工作区。

**端点：** `POST /workspaces/{workspace_id}/join`

**注意**：仅适用于配置为允许公共加入的工作区

## 工作区协议

### 列出工作区协议

检索工作区中的所有协议。

**端点：** `GET /workspaces/{workspace_id}/protocols`

**查询参数：**
- `filter`：过滤协议
  - `all`：工作区中的所有协议
  - `own`：仅您创建的协议
  - `shared`：与您共享的协议
- `key`：搜索关键字
- `order_field`：排序字段（`activity`、`created_on`、`modified_on`、`name`）
- `order_dir`：排序方向（`desc`、`asc`）
- `page_size`：每页结果数
- `page_id`：分页的页码
- `content_format`：内容格式（`json`、`html`、`markdown`）

**请求示例：**
<<<代码块_2>>>

### 在工作区中创建协议

在特定工作区中创建新协议。

**端点：** `POST /workspaces/{workspace_id}/protocols`

**请求正文**：与标准协议创建相同的参数（请参阅protocols_api.md）

**注意**：协议将在工作区中创建并继承工作区权限

## 工作空间类型和权限

### 工作空间类型

1. **个人工作空间**
   - 个人用户的默认工作区
   - 默认为私有
   - 可以共享特定协议

2. **小组工作区**
   - 团队协作工作空间
   - 所有成员共享访问权限
   - 基于角色的权限

3. **机构工作空间**
   - 组织范围内的工作空间
   - 通常包括品牌
   - 集中协议管理

### 权限级别

1. **业主**
   - 完整的工作区控制
   - 管理成员和权限
   - 删除工作区

2. **管理员**
   - 管理协议和成员
   - 配置工作区设置
   - 无法删除工作区

3. **会员**
   - 创建和编辑协议
   - 查看所有工作区协议
   - 评论和协作

4. **查看器**
   - 仅限查看访问
   - 可以对协议发表评论
   - 无法创建或编辑

## 常见用例

### 1. 实验室协议存储库

在共享工作区中组织实验室方案：

1. 创建或加入实验室工作区：`GET /workspaces`
2. 列出现有协议：`GET /workspaces/{id}/protocols`
3. 创建新协议：`POST /workspaces/{id}/protocols`
4. 邀请实验室成员：共享工作区邀请
5. 按类别或标签组织

### 2. 协作协议开发

与团队成员制定协议：
1. 确定目标工作空间：`GET /workspaces`
2. 在工作区中创建协议草案
3.通过工作区自动与团队成员共享
4.通过评论收集反馈
5.迭代并发布最终版本

### 3. 跨机构合作

与外部合作者合作：

1. 创建或识别共享工作区
2. 请求访问：`POST /workspaces/{id}/join-request`
3. 获得批准后，访问共享协议
4. 贡献新协议或更新
5. 在个人工作空间中维护机构协议副本

### 4. 协议迁移

在工作区之间移动协议：

1. 列出源工作区协议：`GET /workspaces/{source_id}/protocols`
2. 对于每个协议，检索完整的详细信息
3. 在目标工作区中创建协议：`POST /workspaces/{target_id}/protocols`
4.复制所有步骤和元数据
5. 更新参考文献和链接

### 5. 工作空间审计

查看工作区活动和内容：

1. 列出所有工作区：`GET /workspaces`
2. 对于每个工作区，获取成员列表
3. 检索带有活动日期的协议列表
4. 识别不活跃或过时的协议
5. 生成活动报告

## 工作空间管理最佳实践

1. **组织**
   - 使用一致的命名约定
   - 按项目或类别标记协议
   - 维护工作区目录或索引

2. **访问控制**
   - 定期审查会员名单
   - 分配适当的权限级别
   - 删除不活跃的成员

3. **协议标准**
   - 建立工作区范围的协议模板
   - 定义所需的元数据字段
   - 实施质量审查流程

4. **合作**
   - 向成员传达工作空间指南
   - 鼓励协议文档化
   - 促进知识共享

5. **备份与归档**
   - 定期导出工作区协议
   - 维护协议版本历史记录
   - 归档已完成的项目

## 组织和工作空间

组织是可以包含多个工作区的更高级别实体。

### 导出组织数据

**端点：** `GET /organizations/{org_id}/export`

**用例**：批量导出所有协议和工作区数据以用于机构存档或备份

## 通知和活动

工作区活动可能会触发通知：

- 添加到工作区的新协议
- 团队成员更新协议
- 关于工作区协议的新评论
- 成员加入或离开工作区
- 权限变更

在帐户设置中配置通知首选项。

## 错误处理

常见错误响应：

- `400 Bad Request`：无效的工作区 ID 或参数
- `401 Unauthorized`：访问令牌丢失或无效
- `403 Forbidden`：工作区权限不足
- `404 Not Found`：找不到工作区或无法访问
- `429 Too Many Requests`：超出速率限制

## 集成注意事项

集成工作区功能时：

1. **缓存工作区列表**：避免重复工作区列表调用
2. **尊重权限**：在尝试操作之前检查用户的角色
3. **处理加入请求**：实施工作区访问批准的工作流程
4. **定期同步**：定期更新本地工作区数据
5. **支持离线访问**：离线工作的缓存协议，重新连接时同步