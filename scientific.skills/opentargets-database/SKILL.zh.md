<!-- 此文件由机器翻译自 SKILL.md -->

---
名称：opentargets-数据库
描述：“查询开放目标平台，用于目标疾病关联、药物目标发现、可处理性/安全性数据、遗传学/组学证据、已知药物，用于治疗目标识别。”
---

# 打开目标数据库

## 概述

开放靶标平台是一个综合资源，用于系统识别和优先排序潜在的治疗药物靶标。它集成了公开可用的数据集，包括人类遗传学、组学、文献和化学数据，以建立目标疾病关联并对其进行评分。

**关键能力：**
- 查询目标（基因）注释，包括易处理性、安全性、表达
- 搜索与证据评分的疾病目标关联
- 从多种数据类型（遗传学、途径、文献等）检索证据
- 寻找已知的疾病药物及其机制
- 获取药物信息，包括临床试验阶段和不良事件
- 评估靶点成药性和治疗潜力

**数据访问：** 该平台提供 GraphQL API、Web 界面、数据下载和 Google BigQuery 访问。此技能重点关注用于编程访问的 GraphQL API。

## 何时使用此技能

该技能应该在以下情况下使用：

- **靶点发现：**寻找疾病的潜在治疗靶点
- **目标评估：** 评估基因的易处理性、安全性和成药性
- **证据收集：** 检索目标疾病关联的支持证据
- **药物重新利用：** 识别可以重新用于新适应症的现有药物
- **竞争情报：** 了解临床优先情况和药物开发前景
- **目标优先顺序：** 根据遗传证据和其他数据类型对目标进行排名
- **机制研究：** 研究生物途径和基因功能
- **生物标志物发现：** 寻找疾病中差异表达的基因
- **安全评估：** 识别药物靶标的潜在毒性问题

## 核心工作流程

### 1. 搜索实体

首先查找感兴趣的目标、疾病或药物的标识符。

**对于目标（基因）：**
```python
from scripts.query_opentargets import search_entities

# Search by gene symbol or name
results = search_entities("BRCA1", entity_types=["target"])
# Returns: [{"id": "ENSG00000012048", "name": "BRCA1", ...}]
```

**对于疾病：**
<<<代码块_1>>>

**对于药物：**
<<<代码块_2>>>

**使用的标识符：**
- 目标：Ensembl 基因 ID（例如，`ENSG00000157764`）
- 疾病：EFO（实验因子本体）ID（例如，`EFO_0000249`）
- 药物：ChEMBL ID（例如，`CHEMBL25`）

### 2.查询目标信息

检索全面的目标注释以评估成药性和生物学。

<<<代码块_3>>>

**要查看的关键注释：**
- **可处理性：** 小分子、抗体、PROTAC 成药性预测
- **安全性：** 多个数据库中已知的毒性问题
- **遗传约束：** pLI 和 LOEUF 分数表明重要性
- **疾病关联：** 与具有证据评分的目标相关的疾病

有关所有目标功能的详细信息，请参阅`references/target_annotations.md`。

### 3.查询疾病信息

获取疾病详细信息和相关靶标/药物。

<<<代码块_4>>>

### 4. 检索目标疾病证据

获取支持目标疾病关联的详细证据。

<<<代码块_5>>>

**主要证据类型：**
1. **遗传关联：** GWAS、罕见变异、ClinVar、基因负担
2. **体细胞突变：**癌症基因普查、IntOGen、癌症生物标志物
3. **known_drug：** 已批准/临床药物的临床优先顺序
4. **affected_pathway：** CRISPR 筛选、途径分析、基因签名
5. **rna_expression：**来自Expression Atlas的差异表达
6. **animal_model:** 来自 IMPC 的小鼠表型
7. **文献：**来自欧洲 PMC 的文本挖掘

有关所有证据类型和解释指南的详细说明，请参阅`references/evidence_types.md`。

### 5. 查找已知药物

确定用于治疗疾病的药物及其靶点。

<<<代码块_6>>>

**临床阶段：**
- 第四阶段：批准药物
- 第三阶段：后期临床试验
- 第 2 阶段：中期试验
- 第一阶段：早期安全试验

### 6. 获取药物信息

检索详细的药物信息，包括机制和适应症。

```python
from scripts.query_opentargets import get_drug_info

drug_info = get_drug_info("CHEMBL25")

# Access:
# - name, synonyms: Drug identifiers
# - drugType: Small molecule, antibody, etc.
# - maximumClinicalTrialPhase: Development stage
# - mechanismsOfAction: Target and action type
# - indications: Diseases with trial phases
# - withdrawnNotice: If withdrawn, reasons and countries
```

### 7. 获取目标的所有关联

查找与目标相关的所有疾病，可以选择按分数过滤。

```python
from scripts.query_opentargets import get_target_associations

# Get associations with score >= 0.5
associations = get_target_associations(
    ensembl_id="ENSG00000157764",
    min_score=0.5
)

# Each association contains:
# - disease: {id, name}
# - score: Overall association score (0-1)
# - datatypeScores: Breakdown by evidence type
```

**协会分数：**
- 范围：0-1（更高=更有力的证据）
- 使用调和和汇总所有数据类型的证据
- 不是置信度分数而是相对排名指标
- 尽管有充分的证据，但研究不足的疾病可能得分较低

## GraphQL API 详细信息

**对于超出所提供的辅助函数范围的自定义查询**，请直接使用 GraphQL API 或修改 `scripts/query_opentargets.py`。

关键信息：
- **端点：** `https://api.platform.opentargets.org/api/v4/graphql`
- **交互式浏览器：** `https://api.platform.opentargets.org/api/v4/graphql/browser`
- **无需身份验证**
- **仅请求所需的字段**以最小化响应大小
- **对大型结果集使用分页**：`page: {size: N, index: M}`

请参阅 `references/api_reference.md` 了解：
- 完整的端点文档
- 所有实体类型的示例查询
- 错误处理模式
- API使用的最佳实践

## 最佳实践

### 目标优先策略

在优先考虑药物靶点时：

1. **从遗传证据开始：** 人类遗传学（GWAS、罕见变异）提供最强的疾病相关性
2. **检查易处理性：** 优先选择具有临床或发现优先权的目标
3. **评估安全性：**审查安全责任、表达模式和遗传限制
4. **评估临床优先顺序：** 已知药物表明成药性和治疗窗
5. **考虑多种证据类型：** 来自不同来源的趋同证据可提高置信度
6. **机械验证：** 途径证据和生物学合理性
7. **手动审查文献：** 对于关键决策，请检查主要出版物

### 证据解释

**强有力的证据指标：**
- 多个独立证据来源
- 高遗传关联评分（尤其是 L2G > 0.5 的 GWAS）
- 已批准药物的临床优先权
- ClinVar 致病变异与疾病匹配
- 具有相关表型的小鼠模型

**警告标志：**
- 仅单一证据来源
- 文本挖掘作为唯一证据（需要手动验证）
- 不同来源的证据相互矛盾
- 高重要性+普遍表达（治疗窗较差）
- 多重安全责任

**分数解读：**
- 分数排名的是相对强度，而不是绝对信心
- 尽管存在潜在有效目标，但研究不足的疾病得分较低
- 专家策划的资源的权重高于计算预测
- 检查证据分类，而不仅仅是总分

### 常见工作流程

**工作流程 1：疾病的目标发现**
1. 搜索疾病→获取EFO ID
2.通过`include_targets=True`查询疾病信息
3. 查看按关联分数排序的首要目标
4. 对于有前景的目标，获取详细的目标信息
5. 检查支持每个关联的证据类型
6. 评估优先目标的可处理性和安全性

**工作流程 2：目标验证**
1. 搜索目标→获取Ensembl ID
2. 获取全面的目标信息
3. 检查可处理性（尤其是临床优先顺序）
4. 审查安全责任和遗传约束
5. 检查疾病关联以了解生物学
6.寻找化学探针或工具化合物
7. 检查已知药物靶向基因以获得机制见解

**工作流程 3：药物再利用**
1. 搜索疾病→获取EFO ID
2. 获取已知的治疗疾病的药物
3. 对于每种药物，获取详细的药物信息
4. 检查行动机制和目标
5.寻找相关疾病指征
6. 评估临床试验阶段和状态
7. 根据机制识别再利用机会

**工作流程 4：竞争情报**
1. 搜索感兴趣的目标
2. 获取相关疾病的证据
3.针对每种疾病，获取已知的药物
4. 审查临床阶段和开发状态
5. 识别竞争对手及其机制
6. 评估临床优先顺序和市场格局

## 资源

### 脚本

**脚本/query_opentargets.py**
常见 API 操作的辅助函数：
- `search_entities()` - 搜索目标、疾病或药物
- `get_target_info()` - 检索目标注释
- `get_disease_info()` - 检索疾病信息
- `get_target_disease_evidence()` - 获取支持证据
- `get_known_drugs_for_disease()` - 寻找治疗疾病的药物
- `get_drug_info()` - 检索药物详细信息
- `get_target_associations()` - 获取目标的所有关联
- `execute_query()` - 执行自定义 GraphQL 查询

### 参考文献

**参考文献/api_reference.md**
完整的 GraphQL API 文档包括：
- 端点详细信息和身份验证
- 可用的查询类型（目标、疾病、药物、搜索）
- 所有常见操作的示例查询
- 错误处理和最佳实践
- 数据许可和引用要求

**参考文献/evidence_types.md**
证据类型和数据来源综合指南：
- 所有7种主要证据类型的详细描述
- 每个来源的评分方法
- 证据解释指南
- 每种证据类型的优点和局限性
- 质量评估建议

**参考文献/target_annotations.md**
完整的目标注释参考：
- 12个主要注释类别解释
- 易处理性评估详细信息
- 安全责任来源
- 表达、重要性和约束数据
- 目标优先顺序的解释指南
- 目标评估的红旗和绿旗

## 数据更新和版本控制

开放目标平台每季度**更新一次新数据发布。当前版本（截至 2025 年 10 月）可在 API 端点获取。

**发布信息：** 检查https://platform-docs.opentargets.org/release-notes以获取最新更新。

**引用：** 使用开放目标数据时，引用：
奥乔亚，D.等人。 (2025) 开放目标平台：促进药物发现中治疗假设的建立。核酸研究，53(D1)：D1467-D1477。

## 限制和注意事项

1. **API用于探索性查询：** 对于许多目标/疾病的系统分析，请使用数据下载或BigQuery
2. **分数是相对的，而不是绝对的：**关联分数对证据强度进行排名，但不能预测临床成功
3. **研究不足的疾病得分较低：** 新型或罕见疾病可能有强有力的证据，但总得分较低
4. **证据质量各不相同：** 专家策划的来源的权重高于计算预测
5. **需要生物学解释：** 分数和证据必须在生物学和临床背景下进行解释
6. **无需身份验证：** 所有数据均可自由访问，但请适当引用